upstream mystatbook_server {
	server unix:/tmp/mystatbook.sock fail_timeout=0;
}

server {
	listen 80;
	server_name mystatbook.com;
	access_log /var/log/nginx/mystatbook.access.log;
	error_log /var/log/nginx/mystatbook.error.log;

	location ^~ /static/ {
		alias /opt/static/mystatbook/;
	}
	location ^~ /media/ {
		alias /opt/media/mystatbook/;
	}

	location / {
		proxy_set_header X-Forwarded-Proto $scheme;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_hide_header X-Powered-By;
		proxy_set_header Host $http_host;
		proxy_redirect off;

		if (!-f $request_filename) {
			proxy_pass http://mystatbook_server;
			break;
		}
	}
}
